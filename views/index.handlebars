{{> header}}
<main>
  <h1>Welcome to Charity Connect</h1>
  <div class="photo-container">
    <img src="charitypic.png" style="width: 200px; height: auto;">
  </div>
  {{#unless isLoggedIn}}
  <p>Please login or create an account to start browsing charities.</p>
  <button class="btn" onclick="window.location.href='/login'">Login</button>
  <button class="btn" onclick="window.location.href='/signup'">Sign Up</button>
  {{/unless}}

  {{#if isLoggedIn}}
  <form action="/search" method="GET">
    <input type="text" name="charity" placeholder="Search for a cause">
    <button type="submit">search</button>
  </form>

  {{#if charities}}
  <h2>Search Results:</h2>
  <ul>
    {{#each charities}}
    <li>
      <h4>{{charityName}}</h4>
      <p>ein: {{ein}}</p>
      <p><a href="{{url}}">{{donationUrl}}</a></p>
      <p>City: {{city}}</p>
      <p>State: {{state}}</p>
      <p>Category: {{category}}</p>
      <form action="/favorites" method="post">
        <input type="hidden" name="data" value="{{data}}" />
        <button class="favorite-btn"> Add to Favorites </button>
      </form>
    </li>
    {{/each}}
  </ul>
  {{/if}}
  {{/if}}
</main>
{{!--
<script>

  //const favoriteButtons = document.querySelectorAll (".favorite-btn")
  console.log(favoriteButtons)
  favoriteButtons.forEach((favoriteButton) => {
    favoriteButton.addEventListener("click", () => {
      //do i have to use stringify, fetch, etc if i just create a post request?
      console.log(JSON.stringify(favoriteButton.dataset.charity))
    })
  })
</script> --}}

<!-- When you "add to favorites" you should be using a POST method from your HTML form, 
  and then in the Express route you can use res.redirect("/favorites") 
  to send the user to a different GET route to reload the HTML  <!